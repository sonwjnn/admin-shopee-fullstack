<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png" />
  <link rel="icon" type="image/png" href="/img/favicon.png" />
  <title></title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="/css/soft-ui-dashboard.css?v=1.0.6" rel="stylesheet" />
</head>

<body class="">
  <main class="main-content mt-0">
    <section class="min-vh-100 mb-8">
      <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg" style="background-image: url('/img/curved-images/curvedCity.jpg')">
        <span class="mask bg-gradient-dark opacity-1"></span>
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-5 text-center mx-auto">
              <h1 class="text-white mb-2 mt-5">Welcome!</h1>
              <p class="text-lead text-white">
                Let's create your own account and experience great features
                with us
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row mt-lg-n10 mt-md-n11 mt-n10">
          <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
            <div class="card z-index-0">
              <div class="card-header text-gradient text-info text-center pt-4">
                <h4>Sign Up</h4>
              </div>
              <div class="row px-xl-5 px-sm-4 px-3"></div>
              <div class="card-body">
                <form class="signupForm" role="form text-left">
                  <div class="mb-3">
                    <input type="text" class="form-control" placeholder="Display name" aria-label="username" aria-describedby="email-addon" id="displayName" />
                  </div>

                  <div class="mb-3">
                    <input type="text" class="form-control" placeholder="User name" aria-label="username" aria-describedby="email-addon" id="username" />
                  </div>

                  <div class="mb-3">
                    <input type="password" class="form-control" placeholder="Password" aria-label="password" aria-describedby="email-addon" id="password" />
                  </div>

                  <div class="mb-3">
                    <input type="password" class="form-control" placeholder="Confirm password" aria-label="password" aria-describedby="email-addon" id="confirmPassword" />
                  </div>
                  <!-- <div class="form-check form-check-info text-left">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" checked />
                    <label class="form-check-label" for="flexCheckDefault">
                      I agree the
                      <a href="javascript:;" class="text-dark font-weight-bolder">Terms and Conditions</a>
                    </label>
                  </div> -->
                  <div class="text-center">
                    <button type="submit" class="btn bg-gradient-info w-100 my-4 mb-2">
                      Sign up
                    </button>
                  </div>
                  <p class="text-sm mt-3 mb-0">
                    Already have an account?
                    <a href="/admin/signin" class="text-gradient text-info font-weight-bolder">Sign in</a>
                  </p>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header alert-gradient-info">
          <h5 class="modal-title text-white" id="exampleModalLongTitle">
            <i class="fa fa-flag" aria-hidden="true"></i> Notification
          </h5>
        </div>
        <div class="modal-body center text-black">
          <div class="d-flex">
            <div id="notify-register"></div>
            &nbsp
            <div class="timeout"><span id="s"></span></div>
          </div>
          <div class="center" id="loadding">
            <div class="lds-ring pl-5-loading">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>
        </div>
        <div class="modal-footer" id="close">
          <button type="button" class="btn btn-secondary mt-0 mb-0" data-dismiss="modal">
            Close
          </button>
        </div>
        <br id="br" class="hiden" />
      </div>
    </div>
  </div>
  <button id="notify-register-btn" type="button" class="btn btn-primary hiden" style="display: none;" data-toggle="modal" data-target="#exampleModalCenter">
    Launch demo modal
  </button>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>



  <!--   Core JS Files   -->
  <script src="/js/core/popper.min.js"></script>
  <script src="/js/core/bootstrap.min.js"></script>
  <script src="/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options)
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="/js/soft-ui-dashboard.min.js?v=1.0.6"></script>


  <!--Logic signup-->
  <script>
    $(document).ready(function() {
      $(".timeout").hide();

      $(".signupForm").on("submit", (e) => {
        e.preventDefault();

        const displayName = $("#displayName").val();
        const username = $("#username").val();
        const confirmPassword = $("#confirmPassword").val();
        const password = $("#password").val();

        if (!displayName) {
          $("#displayName").addClass("setredPlace");
          $("#displayName").attr("placeholder", "Please fill in here").focus();
          return
        } else {
          $("#displayName").attr("placeholder", "");
        }

        if (!username) {
          $("#username").addClass("setredPlace");
          $("#username").attr("placeholder", "Please fill in here").focus();
          return
        } else {
          $("#username").attr("placeholder", "");
        }

        if (!password) {
          $("#password").addClass("setredPlace");
          $("#password").attr("placeholder", "Please fill in here").focus();
          return
        } else {
          $("#password").attr("placeholder", "");
        }

        if (!confirmPassword) {
          $("#confirmPassword").addClass("setredPlace");
          $("#confirmPassword").attr("placeholder", "Please fill in here").focus();
          return
        } else {
          $("#confirmPassword").attr("placeholder", "");
        }


        $.ajax({
          url: "/admin/signup",
          type: "POST",
          data: {
            displayName,
            username,
            password,
            confirmPassword,
            role: 'admin'
          },
          success: function(results) {
            $("#notify-register").html(results.msg || results.message);
            $("#loadding").hide();
            $("#notify-register-btn").click();
            setTimeout(() => {
              window.location.href = "/";
            }, 2000)
          },
          error: function(xhr, status, error) {
            $("#notify-register").html(xhr.responseJSON.error);
            $("#loadding").hide();
            $("#notify-register-btn").click();
          },

        });
        return false;

      })
    });
  </script>

</body>

</html>